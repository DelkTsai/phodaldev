{% load blog_tags keyword_tags mezzanine_tags i18n future event_tags %}

{% block blog_recent_posts %}
{% blog_recent_posts 10 as recent_posts %}
{% if recent_posts %}
<section class="section--center mdl-grid mdl-grid--no-spacing mdl-shadow--2dp recent-post">
    <div class="mdl-card__title mdl-card--border mdl-card--expand">
        <h3 class="mdl-card__title-text">{% trans "最近文章" %}</h3>
    </div>
<div class="mdl-card__supporting-text">
<ul class="list-unstyled">
{% for recent_post in recent_posts %}
<li>
    {% spaceless %}
    <a href="{{ recent_post.get_absolute_url }}">
        {% if settings.BLOG_USE_FEATURED_IMAGE and recent_post.featured_image %}
        <img src="{{ MEDIA_URL }}{% thumbnail recent_post.featured_image 24 24 %}">
        {% endif %}
    {{ recent_post.title }}
    </a>
    {% endspaceless %}
</li>
{% endfor %}
</ul></div>
</section>
{% endif %}
{% endblock %}

{% include "includes/user_info.html" %}

{% block blog_keywords %}
{% keywords_for blog.blogpost as tags %}
{% if tags %}
<section class="section--center mdl-grid mdl-grid--no-spacing mdl-shadow--2dp recent-post">
    <div class="mdl-card__title mdl-card--border mdl-card--expand">
        <h3 class="mdl-card__title-text">{% trans "标签" %}</h3>
    </div>
<ul class="mdl-card__supporting-text list-unstyled tag-cloud">
{% for tag in tags %}
{% if tag.item_count >= 8 %}
<li>
    <a href="{% url "blog_post_list_tag" tag.slug %}"
        class="tag-weight-{{ tag.weight }}">{{ tag }}</a>
    ({{ tag.item_count }})
</li>
{% endif %}
{% endfor %}
</ul></section>
{% endif %}
{% endblock %}

{% block events %}
<section class="section--center mdl-grid mdl-shadow--2dp recent-post" itemscope itemtype="http://schema.org/Event">
    <div class="mdl-card__title mdl-card--border mdl-card--expand">
        <h3 class="mdl-card__title-text" itemprop="name">最近的一些事</h3>
    </div>
    <ul class="mdl-card__supporting-text list-unstyled">
        {% events %}
      {% for event in events %}
        <li>
          <div itemprop="description">{{ event.content |richtext_filters|safe }}</div>
          <p class="meta"><span itemprop="startDate" content="{{ event.date }}">{{ event.date }}</span>  |
              <span itemprop="location" itemscope itemtype="http://schema.org/Place">{{ event.location }}</span></p>
        </li>
      {% endfor %}
    </ul>
</section>
{% endblock %}
